import fitz, base64, requests, json, os, time, re; from io import BytesIO; from PIL import Image; from datetime import datetime; API_KEY="sk-qnczgrftmuzuyhyfdroapmqqqnefqpvbwtjikrnlbzbimpkw"; MODEL="Qwen/Qwen2.5-VL-72B-Instruct"; pdf_files=[os.path.join(root,file) for root,dirs,files in os.walk("knowledge_data") for file in files if file.lower().endswith(".pdf")]; print(f"🚀 开始处理 {len(pdf_files)} 个PDF文件"); os.makedirs("processed_knowledge_base/by_document", exist_ok=True); pdf_path=pdf_files[0]; filename=os.path.basename(pdf_path); print(f"📄 处理: {filename}"); doc=fitz.open(pdf_path); total_pages=len(doc); doc.close(); print(f"📊 页数: {total_pages}"); print("开始处理页面...")
