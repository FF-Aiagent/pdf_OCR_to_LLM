import base64, requests, time; f=open("ocr_test_page.png","rb"); b64=base64.b64encode(f.read()).decode(); f.close(); prompts=["请识别图片中的所有中文文字，直接输出：","你是OCR专家，请准确识别图片中的每一个汉字：","这是中医文档，请完整识别所有文字内容：","OCR任务：将图片中的文字转换为文本：","请仔细识别图片中的所有文字，保持原始格式："]; results=[]; print(f"测试{len(prompts)}种提示词"); [results.append((i+1,requests.post("https://api.siliconflow.cn/v1/chat/completions",headers={"Authorization":"Bearer sk-qnczgrftmuzuyhyfdroapmqqqnefqpvbwtjikrnlbzbimpkw","Content-Type":"application/json"},json={"model":"Qwen/QVQ-72B-Preview","messages":[{"role":"user","content":[{"type":"text","text":prompt},{"type":"image_url","image_url":{"url":f"data:image/png;base64,{b64}"}}]}],"max_tokens":3000,"temperature":0.1},timeout=60))) or print(f"提示词{i+1}: {len(results[-1][1].json().get(\"choices\",[{}])[0].get(\"message\",{}).get(\"content\",\"\"))}字符") or open(f"result_{i+1}.txt","w",encoding="utf-8").write(f"提示词{i+1}: {prompt}
{=*50}
{results[-1][1].json().get(\"choices\",[{}])[0].get(\"message\",{}).get(\"content\",\"\")}") or time.sleep(2) for i,prompt in enumerate(prompts)]; print("完成所有测试")
